<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestion des utilisateurs</title>
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  </head>
  <body class="bg-black">
    <?- include('header.ejs') ?>

    <? if(!session.user || session.user.role !='admin'){ ?>
    <h2 class="text-light">Vous n'êtes pas autorisé à accéder à cette page</h2>
    <a class="btn btn-danger" href="/accueil">Retour à l'accueil</a>

    <? }else{?>
    <h1 class="text-light text-center mb-5">Liste des utilisateurs</h1>

    <div class="w-50 offset-3">
      <div class="d-flex text-center gap-3">
        <div class="text-light w-25">Nom</div>
        <div class="text-light w-25">Prenom</div>
        <div class="text-light w-25">Email</div>
        <div class="text-light w-25">Rôle</div>
      </div>
      <? users.forEach(user =>
      { ?>

      <div class="text-light d-flex gap-3 text-center">
        <div class="w-50">
          <?= user.nom ?>
        </div>
        <div class="w-50">
          <?= user.prenom ?>
        </div>
        <div class="w-50">
          <?= user.email ?>
        </div>
        <div class="w-50">
          <?= user.role ?>
        </div>
      </div>
      <? }) ?>
      <? } ?>
    </div>
  </body>
</html>
